# =============================================================================
# VIBE CODER 3D - Environment Configuration
# =============================================================================
# Copy this file to `.env` and customize for your environment

# -----------------------------------------------------------------------------
# Platform & Device Settings
# -----------------------------------------------------------------------------

# Target platform - affects optimization strategy
# Options: desktop, mobile, web
PLATFORM=desktop

# Mobile optimization - applies aggressive optimizations for mobile devices
# Set to true for mobile/tablet builds
IS_MOBILE=false

# Enable WebGL compatibility mode (uses conservative features)
WEBGL_COMPAT_MODE=false

# -----------------------------------------------------------------------------
# 3D Model Optimization Settings
# -----------------------------------------------------------------------------

# Aggressive model optimization - reduces quality for performance
# Set to true for low-end devices or when performance is critical
AGGRESSIVE_MODEL_OPTIMIZATION=false

# Enable automatic mesh decimation before main pipeline
# Warning: May significantly reduce visual quality if ratio too low
AUTO_DECIMATE_MODELS=false

# Target triangle reduction ratio for auto-decimation (0.0-1.0)
# IMPORTANT: Quality recommendations by asset type:
#   Hero characters: 0.3-0.5 (30-50% - preserves details)
#   Environment props: 0.1-0.2 (10-20% - balanced)
#   Background objects: 0.05-0.1 (5-10% - aggressive)
#   Ultra-low poly: 0.02-0.05 (2-5% - mobile/web)
AUTO_DECIMATE_RATIO=0.15

# Error threshold for decimation (higher = more aggressive, lower quality)
# Recommended ranges:
#   0.001-0.01: High quality (slight reduction)
#   0.01-0.1: Balanced (visible reduction but acceptable)
#   0.1-1.0: Aggressive (may lose details)
AUTO_DECIMATE_ERROR=0.01

# Enable Blender integration for advanced decimation
# Requires Blender to be installed and accessible
# Blender provides better quality than meshopt at low ratios
# and handles UVs/normals/materials better
USE_BLENDER_DECIMATION=false

# Blender executable path (leave empty to auto-detect)
# Examples:
#   macOS: /Applications/Blender.app/Contents/MacOS/Blender
#   Linux: /usr/bin/blender
#   Windows: C:/Program Files/Blender Foundation/Blender 3.6/blender.exe
BLENDER_PATH=

# Blender quality preset (1-5)
# Based on WebGL/Three.js LOD benchmarks
# 1: Ultra compression (5% ratio, 256px textures, JPEG 75%)
# 2: High compression (10% ratio, 512px textures, JPEG 85%)
# 3: Balanced (15% ratio, 1024px textures, PNG)
# 4: Good quality (25% ratio, 2048px textures, PNG)
# 5: High quality (40% ratio, 4096px textures, original)
BLENDER_QUALITY_PRESET=3

# Skip optimization for models below this triangle count
OPTIMIZATION_MIN_TRIANGLES=1000

# Triangle count targets (LOD0 - Base model)
# Based on industry benchmarks for Three.js/WebGL:
# - Desktop High-end: 50k-100k (hero), 20k-50k (prop), 5k-20k (background)
# - Mobile High-end: 20k-40k (hero), 10k-20k (prop), 2k-10k (background)
# Targets aim for middle ground (desktop/mobile compatibility)
MAX_TRIANGLES_HERO=80000      # Hero characters/main props (ideal: 50k)
MAX_TRIANGLES_PROP=50000      # Environment props (ideal: 20k)
MAX_TRIANGLES_BACKGROUND=20000 # Background objects (ideal: 5k)

# -----------------------------------------------------------------------------
# Texture Optimization Settings
# -----------------------------------------------------------------------------

# Maximum texture resolution (width/height in pixels)
# Options: 512, 1024, 2048, 4096
MAX_TEXTURE_SIZE=2048

# Enable texture compression (KTX2/Basis Universal)
ENABLE_TEXTURE_COMPRESSION=true

# Texture compression quality (1-255, higher = better quality)
TEXTURE_COMPRESSION_QUALITY=128

# Force power-of-two texture dimensions
FORCE_POT_TEXTURES=true

# -----------------------------------------------------------------------------
# LOD (Level of Detail) Settings
# Based on WebGL/Three.js industry benchmarks
# -----------------------------------------------------------------------------

# Enable automatic LOD generation
ENABLE_LOD_GENERATION=true

# LOD1 (high_fidelity) ratio: 40% of base
# Targets: Desktop 20k-50k, Mobile 10k-20k
# Example: 50k base → 20k LOD1
LOD_HIGH_RATIO=0.4

# LOD2 (low_fidelity) ratio: 10% of base
# Targets: Desktop 5k-20k, Mobile 2k-10k
# Example: 50k base → 5k LOD2
LOD_LOW_RATIO=0.1

# LOD error threshold for high quality (lower = better quality)
LOD_HIGH_ERROR=0.01

# LOD error threshold for low quality (higher = more aggressive)
LOD_LOW_ERROR=0.1

# -----------------------------------------------------------------------------
# Compression Settings
# -----------------------------------------------------------------------------

# Mesh compression method
# Options: draco, meshopt, both, none
MESH_COMPRESSION=draco

# Draco compression speed (1-10, higher = faster but larger files)
DRACO_ENCODE_SPEED=5

# Draco decompression speed (1-10, higher = faster decode on client)
DRACO_DECODE_SPEED=5

# Enable gzip compression for final GLB files
ENABLE_GZIP=false

# -----------------------------------------------------------------------------
# Development & Debugging
# -----------------------------------------------------------------------------

# Enable verbose logging during optimization
VERBOSE_OPTIMIZATION=false

# Skip optimization cache (force re-optimize all models)
FORCE_REOPTIMIZE=false

# Enable optimization profiling/benchmarking
ENABLE_PROFILING=false

# Generate optimization reports
GENERATE_REPORTS=false

# Fail build on optimization errors
FAIL_ON_OPTIMIZATION_ERROR=false

# -----------------------------------------------------------------------------
# Asset Pipeline Settings
# -----------------------------------------------------------------------------

# Models directory path (relative to project root)
# This is where the pipeline looks for source models and generates optimized outputs
MODELS_DIR=src/game/assets/models

# Enable automatic model validation
VALIDATE_MODELS=true

# Check model complexity before optimization
CHECK_MODEL_COMPLEXITY=true

# Warn when model exceeds recommended triangle count
WARN_ON_COMPLEX_MODELS=true

# -----------------------------------------------------------------------------
# Performance Budgets
# -----------------------------------------------------------------------------

# Maximum total scene triangles (all visible meshes combined)
MAX_SCENE_TRIANGLES=500000

# Maximum memory budget for models (MB)
MAX_MODEL_MEMORY_MB=100

# Target frame budget (ms per frame)
TARGET_FRAME_TIME_MS=16.67

# -----------------------------------------------------------------------------
# Experimental Features
# -----------------------------------------------------------------------------

# Enable experimental mesh optimization features
ENABLE_EXPERIMENTAL_OPTIMIZATIONS=false

# Use alternative simplification algorithm
USE_ALTERNATIVE_SIMPLIFIER=false

# Enable mesh merging/batching
ENABLE_MESH_BATCHING=false

# -----------------------------------------------------------------------------
# AI Agent Configuration (Main Chat Agent - Claude Code SDK)
# -----------------------------------------------------------------------------

# Claude Code SDK API Configuration
# Your API key for the main chat agent (can use Z.AI, OpenRouter, or Anthropic)
VITE_CLAUDE_CODE_SDK_API_KEY=your_api_key_here

# API base URL (compatible with Anthropic format)
# Examples:
#   - Z.AI: https://api.z.ai/api/anthropic
#   - OpenRouter: https://openrouter.ai/api/v1
#   - Anthropic: https://api.anthropic.com/v1
VITE_CLAUDE_CODE_SDK_BASE_URL=https://api.z.ai/api/anthropic

# Model to use for AI assistant (main chat agent)
# Examples:
#   - Z.AI: glm-4.6
#   - OpenRouter: anthropic/claude-3.5-sonnet
#   - Anthropic: claude-3-5-sonnet-20241022
VITE_CLAUDE_CODE_SDK_MODEL=glm-4.6

# Maximum context tokens to use (Claude Sonnet 4.5 supports 200k)
# Set lower to reduce costs, higher for more context awareness
VITE_AGENT_MAX_CONTEXT_TOKENS=150000

# Temperature for AI responses (0.0 = deterministic, 1.0 = creative)
# Recommended: 0.7 for balanced responses
VITE_AGENT_TEMPERATURE=0.7

# Auto-save chat sessions to localStorage
VITE_AGENT_AUTO_SAVE=true

# Enable debug logging for agent service
VITE_AGENT_DEBUG=false

# -----------------------------------------------------------------------------
# OpenRouter Configuration (Screenshot Analysis with Vision Models)
# -----------------------------------------------------------------------------

# OpenRouter API Key for vision-enabled models
# Get your API key at: https://openrouter.ai/keys
VITE_OPENROUTER_VISION_API_KEY=your_openrouter_api_key_here

# Vision model to use for screenshot analysis
# Recommended models:
#   - anthropic/claude-3.5-sonnet (best quality, multimodal)
#   - anthropic/claude-3-opus (high quality)
#   - openai/gpt-4o (fast, good quality)
#   - google/gemini-pro-vision (cost-effective)
VITE_OPENROUTER_VISION_MODEL=google/gemini-2.5-flash-preview-09-2025

# Enable OpenRouter for screenshot analysis by default
# If true, all screenshots will be analyzed with OpenRouter instead of the main agent
# If false, screenshots will use the standard flow (sent to main agent)
VITE_USE_OPENROUTER_FOR_SCREENSHOTS=true

# Thinking effort level for OpenRouter screenshot analysis
# Options: low, medium, high (enables reasoning/thinking mode)
# Set to empty to disable thinking mode
VITE_OPENROUTER_THINKING_EFFORT=high

# Note: VITE_CLAUDE_CODE_SDK_API_KEY above is for the main chat agent
# VITE_OPENROUTER_VISION_API_KEY is specifically for OpenRouter screenshot analysis
